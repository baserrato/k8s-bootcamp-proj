use actix_web::{get, App, HttpServer, Responder};
use rand;

fn matrix(m1: Vec<Vec<u64>>, m2: Vec<Vec<u64>>) -> u64 {
    let mut m3: Vec<Vec<u64>> = m1.clone();
    for n in 0..m1.len() {
        for i in 0..m1[n].len() {
            m3[n][i] = m1[n][i]*m2[n][i];
        }
    }
    m3[0][0] = rand::random();
    m3[0][0]
}

#[get("/")]
async fn greet() -> impl Responder {
    let m1: Vec<Vec<u64>> = vec![vec![13,34,25,27,18,10,1000,23452345,13241234,13241234,12341234,1234,13241324,12341234,1234,1234,1234],
    vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],
    vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],
    vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],
    vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],];
    let m2: Vec<Vec<u64>> = vec![vec![13,34,25,27,18,10,1000,23452345,13241234,13241234,12341234,1234,13241324,12341234,1234,1234,1234],
    vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],
    vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],
    vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],
    vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],vec![134,1324,123,4134,1234,1234,1324,1234,1234,1234,423,6354,7456,84678,6759,356,254,62345],];
    format!("Hello {}!", matrix(m1, m2))
}

#[actix_web::main]
async fn main() -> std::io::Result<()> {
    HttpServer::new(|| {
        App::new()
            .service(greet)
    })
    .bind(("0.0.0.0", 8080))?
    .run()
    .await
}
